{% if questions %} <!-- 用于主页中显示问题概要 -->
    {% for ques in questions %} <!-- question是个list， ques是model里QuestionInfo的dict -->
        <div class="ques_each">
        <h3 class="text-primary"><a href="{{ url_for('front.show_question', question_id=ques['quid']) }}">{{ ques['qutitle'] }}</a></h3>
        <p>
            {{ ques['qucontent']|striptags|truncate }}
            <small><a href="{{ url_for('front.show_question', question_id=ques['quid']) }}">Read More</a></small>
        </p>
        <small>
            Comments: <a href="{{ url_for('front.show_question', question_id=ques['quid']) }}#comments">{{ ques['ansnumber'] }}</a>&nbsp;&nbsp;
            Category: <a
                href="{{ url_for('front.show_category', category_id=ques['catid']) }}">{{ categories[ques['catid']] }}</a>
            <span class="float-right">{{ moment(ques['qutime']).format('LL') }}</span> <!--categoried是模板上下文变量 -->
        </small>
        {% if ques['uid'] == current_user.uid or current_user.admin%}  <!-- 当前用户或者管理员可以删除 -->
            <form class="inline" method="post"
                  action="{{ url_for('dashboard.delete_questions', question_id=ques['quid'], next=request.full_path) }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure?');">删除
                </button>
            </form>
            <!--<br>-->
        {% endif %}
<!-- 用户关注问题 -->
        {% if current_user.is_authenticated and not current_user.admin%}
            <form class="inline" method="post"
                  action="{{ url_for('front.newfollow', question_id=ques['quid'], next=request.full_path) }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                    <button type="submit" class="btn btn-info" onclick="return confirm('Are you sure?');">关注
                </button>
            </form>
            <br>
        {% endif %}
        {% if not loop.last %}
            <hr>
        {% endif %}
        </div>
    {% endfor %}
    <br>
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% if page.has_prev %}
            <li class="page-item active"><a class="page-link" href="{{ url_for(request.endpoint, page=page.cur_page-1, user_id=current_user.uid) }}">上一页</a></li>
            {% else %}
            <li class="page-item disabled"><a class="page-link" href="#">上一页</a></li>
            {% endif %}

            {%if not page.is_last%}
            <li class="page-item active"><a class="page-link" href="{{url_for(request.endpoint, page=page.cur_page+1, user_id=current_user.uid)}}">下一页</a></li>
            {%else%}
            <li class="page-item disabled"><a class="page-link" href="#">下一页</a></li>
            {%endif%}
        </ul>
    </nav>

{% else %}
    <div class="tip">
        <h5>No posts yet.</h5>
    </div>
{% endif %}
